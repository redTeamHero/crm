<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Settings</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/tour-guide.css">
<script src="/theme.js"></script>
<link rel="stylesheet" href="/style.css">
<link rel="stylesheet" href="/evolv-dark.css">
<script src="/sidebar.js" defer></script>
<script src="/command-palette.js" defer></script>
<style>
  :root { color-scheme: dark; }
  body { background: #0a0a0a; }

  .api-card {
    background: #111113;
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 16px;
    padding: 24px;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }
  .api-card:hover {
    border-color: rgba(212,168,83,0.15);
    box-shadow: 0 4px 24px rgba(0,0,0,0.3);
  }
  .api-card-header {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 16px;
  }
  .api-card-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 18px;
  }
  .api-card-title {
    font-size: 15px;
    font-weight: 600;
    color: #f0f0f0;
  }
  .api-card-desc {
    font-size: 12px;
    color: #666;
    margin-top: 2px;
  }
  .api-card .input-row {
    margin-top: 12px;
  }
  .api-card .input-row label {
    display: block;
    font-size: 11px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: #888;
    margin-bottom: 6px;
  }
  .api-card input {
    width: 100%;
    background: #0a0a0a;
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 10px;
    padding: 10px 14px;
    font-size: 13px;
    color: #e5e5e5;
    outline: none;
    transition: border-color 0.2s ease;
  }
  .api-card input:focus {
    border-color: #d4a853;
    box-shadow: 0 0 0 2px rgba(212,168,83,0.15);
  }
  .api-card input::placeholder {
    color: #444;
  }
  .api-card .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .api-card .status-dot.connected { background: #22c55e; }
  .api-card .status-dot.disconnected { background: #666; }

  .section-divider {
    height: 1px;
    background: rgba(255,255,255,0.04);
    margin: 40px 0;
  }

  .hotkey-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 12px;
  }
  .hotkey-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    background: #111113;
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 10px;
    padding: 12px 16px;
  }
  .hotkey-item span {
    font-size: 13px;
    color: #aaa;
  }
  .hotkey-item input {
    width: 42px;
    text-align: center;
    background: #0a0a0a;
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 8px;
    padding: 6px;
    font-size: 14px;
    font-weight: 600;
    color: #d4a853;
    outline: none;
  }
  .hotkey-item input:focus {
    border-color: #d4a853;
  }
</style>
</head>
<body class="text-gray-200">
<header id="host-nav" class="p-4">
  <div class="max-w-7xl mx-auto glass card nav-shell">
    <div class="nav-brand-row">
      <div class="text-xl font-semibold">Metro 2 CRM</div>
      <button id="navToggle" class="btn md:hidden" type="button" aria-expanded="false" aria-controls="primaryNav">
        <span>Menu</span>
        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
    <nav id="primaryNav" class="hidden flex-col gap-2 md:flex md:flex-row md:items-center md:gap-2" aria-label="Primary">
      <div id="primaryNavLinks" class="flex flex-col md:flex-row md:items-center gap-2 w-full md:w-auto">
        <a href="/dashboard" class="btn nav-btn">Dashboard</a>
        <a href="/clients" class="btn nav-btn">Clients</a>
        <a href="/leads" class="btn nav-btn">Leads</a>
        <a href="/schedule" class="btn nav-btn">Schedule</a>
        <a href="/billing" class="btn nav-btn">Billing</a>
        <a href="/tradelines" class="btn nav-btn">Tradelines</a>
        <button id="btnHelp" class="btn nav-btn" data-tip="Help (H)">Help</button>
        <div id="tierBadge" class="hidden sm:flex items-center gap-2 rounded-full bg-[rgba(212,168,83,0.12)] px-4 py-2 text-[#d4a853] shadow-sm" title="You've started your journey.">
          <span class="text-xl">ðŸ“„</span>
          <span class="font-semibold text-sm">Rookie</span>
        </div>
      </div>
    </nav>
  </div>
</header>
<main class="max-w-5xl mx-auto px-4 py-8 space-y-8">
  <div>
    <h1 class="text-2xl font-bold text-white">Settings</h1>
    <p class="text-sm text-gray-500 mt-1">Manage your API integrations and preferences</p>
  </div>

  <div id="adminPanel" class="space-y-8 hidden">
    <div>
      <div class="flex items-center gap-3 mb-6" id="api-integrations">
        <div class="w-8 h-8 rounded-lg bg-[#d4a853]/15 flex items-center justify-center">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#d4a853" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
        </div>
        <div>
          <h2 class="text-lg font-semibold text-white">API Integrations</h2>
          <p class="text-xs text-gray-500">Connect your services to power automation</p>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
        <div class="api-card">
          <div class="api-card-header">
            <div class="api-card-icon" style="background:rgba(99,102,241,0.12)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#818cf8" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
            </div>
            <div>
              <div class="api-card-title">Stripe</div>
              <div class="api-card-desc">Payment processing and subscriptions</div>
            </div>
          </div>
          <div class="input-row">
            <label>API Key</label>
            <input id="stripeKey" placeholder="sk_live_..." />
          </div>
        </div>

        <div class="api-card">
          <div class="api-card-header">
            <div class="api-card-icon" style="background:rgba(34,197,94,0.12)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            </div>
            <div>
              <div class="api-card-title">Google Calendar</div>
              <div class="api-card-desc">Sync consult scheduling and events</div>
            </div>
          </div>
          <div class="input-row">
            <label>Calendar Token</label>
            <input id="gcalToken" placeholder="Token" />
          </div>
          <div class="input-row">
            <label>Calendar ID</label>
            <input id="gcalId" placeholder="primary@gmail.com" />
          </div>
        </div>

        <div class="api-card">
          <div class="api-card-header">
            <div class="api-card-icon" style="background:rgba(239,68,68,0.12)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            </div>
            <div>
              <div class="api-card-title">Gmail API</div>
              <div class="api-card-desc">Transactional sends via Gmail OAuth</div>
            </div>
          </div>
          <div class="input-row">
            <label>Client ID</label>
            <input id="gmailClientId" placeholder="Client ID" />
          </div>
          <div class="input-row">
            <label>Client Secret</label>
            <input id="gmailClientSecret" placeholder="Client Secret" />
          </div>
          <div class="input-row">
            <label>Refresh Token</label>
            <input id="gmailRefreshToken" placeholder="Refresh Token" />
          </div>
        </div>

        <div class="api-card">
          <div class="api-card-header">
            <div class="api-card-icon" style="background:rgba(212,168,83,0.12)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#d4a853" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            </div>
            <div>
              <div class="api-card-title">Certified Mail</div>
              <div class="api-card-desc">USPS certified mail for dispute letters</div>
            </div>
          </div>
          <div class="input-row">
            <label>SimpleCertifiedMail API Key</label>
            <input id="sendCertifiedMailKey" placeholder="API Key" />
          </div>
        </div>

        <div class="api-card">
          <div class="api-card-header">
            <div class="api-card-icon" style="background:rgba(168,85,247,0.12)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#a855f7" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
            </div>
            <div>
              <div class="api-card-title">HIBP (Breach Monitor)</div>
              <div class="api-card-desc">Have I Been Pwned breach checking</div>
            </div>
          </div>
          <div class="input-row">
            <label>API Key</label>
            <input id="hibpKey" placeholder="HIBP API Key" />
          </div>
        </div>

        <div class="api-card">
          <div class="api-card-header">
            <div class="api-card-icon" style="background:rgba(59,130,246,0.12)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2"><path d="M6 4h12l3 5-9 11L3 9z"/></svg>
            </div>
            <div>
              <div class="api-card-title">RSS Feed</div>
              <div class="api-card-desc">Industry news feed for dashboard</div>
            </div>
          </div>
          <div class="input-row">
            <label>Feed URL</label>
            <input id="rssFeedUrl" placeholder="https://..." />
          </div>
        </div>

        <div class="api-card md:col-span-2">
          <div class="api-card-header">
            <div class="api-card-icon" style="background:rgba(14,165,233,0.12)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0ea5e9" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
            </div>
            <div>
              <div class="api-card-title">Marketing API</div>
              <div class="api-card-desc">SMS and email marketing automation</div>
            </div>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="input-row">
              <label>Base URL</label>
              <input id="marketingApiBaseUrl" placeholder="https://api.marketing.com" />
            </div>
            <div class="input-row">
              <label>API Key / Token</label>
              <input id="marketingApiKey" placeholder="API Key" />
            </div>
          </div>
        </div>
      </div>

      <div class="mt-6 flex items-center justify-end">
        <div class="flex items-center gap-3">
          <button id="saveSettings" class="px-6 py-2.5 rounded-xl text-sm font-semibold" style="background:linear-gradient(135deg,#d4a853,#c4973e);color:#0a0a0a;">Save All</button>
          <div id="saveMsg" class="text-sm text-[#d4a853] hidden">Saved!</div>
        </div>
      </div>
    </div>

    <div class="space-y-4 pt-6 border-t border-white/5">
      <div class="font-medium text-white">Environment Overrides</div>
      <p class="text-xs text-gray-500">Custom key-value pairs synced with your server</p>
      <div id="envList" class="space-y-2 text-sm"></div>
      <button id="addEnvRow" type="button" class="px-4 py-2 rounded-lg text-xs font-medium border border-gray-700 text-gray-400 hover:border-[#d4a853]/30 hover:text-[#d4a853] transition-colors">+ Add Variable</button>
    </div>
  </div>

  <div id="userManager" class="glass card space-y-2 hidden" style="background:#111113;border:1px solid rgba(255,255,255,0.06);border-radius:16px;padding:24px;">
    <div class="font-medium text-white">User Permissions</div>
    <div id="userList" class="space-y-2 text-sm"></div>
  </div>

  <div class="section-divider"></div>

  <div id="hotkeyPanel">
    <div class="flex items-center gap-3 mb-6">
      <div class="w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#888" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01M8 12h.01M12 12h.01M16 12h.01M6 16h12"/></svg>
      </div>
      <div>
        <h2 class="text-lg font-semibold text-white">Keyboard Shortcuts</h2>
        <p class="text-xs text-gray-500">Customize single-key shortcuts for common actions</p>
      </div>
    </div>
    <div class="hotkey-grid">
      <div class="hotkey-item"><span>Help</span><input id="hotkeyHelp" maxlength="1" /></div>
      <div class="hotkey-item"><span>New Consumer</span><input id="hotkeyNewConsumer" maxlength="1" /></div>
      <div class="hotkey-item"><span>Upload</span><input id="hotkeyUpload" maxlength="1" /></div>
      <div class="hotkey-item"><span>Edit Consumer</span><input id="hotkeyEditConsumer" maxlength="1" /></div>
      <div class="hotkey-item"><span>Generate</span><input id="hotkeyGenerate" maxlength="1" /></div>
      <div class="hotkey-item"><span>Remove Tradeline</span><input id="hotkeyRemove" maxlength="1" /></div>
      <div class="hotkey-item"><span>Mode: Breach</span><input id="hotkeyModeBreach" maxlength="1" /></div>
      <div class="hotkey-item"><span>Mode: Assault</span><input id="hotkeyModeAssault" maxlength="1" /></div>
      <div class="hotkey-item"><span>Mode: Identity</span><input id="hotkeyModeIdentity" maxlength="1" /></div>
    </div>
    <div class="mt-5 flex items-center gap-3">
      <button id="saveHotkeys" class="px-5 py-2 rounded-xl text-sm font-medium border border-gray-700 text-gray-300 hover:border-[#d4a853]/30 hover:text-[#d4a853] transition-colors">Save Shortcuts</button>
      <div id="hotkeyMsg" class="text-sm text-[#d4a853] hidden">Saved!</div>
    </div>
  </div>
</main>
<script type="module" src="/common.js"></script>
<script src="/hotkeys.js"></script>
<script type="module" src="/settings.js"></script>
<script src="/tour-guide.js" type="module"></script>
</body>
</html>
