<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Library</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
<script>
(() => {
  const themes = {
    purple:{accent:'#AF52DE',hover:'#9333EA',bg:'#AF52DE',
            glassBg:'rgba(255,255,255,0.4)',glassBrd:'rgba(255,255,255,0.25)'},
    blue:{accent:'#007AFF',hover:'#005BB5',bg:'#007AFF',
          glassBg:'rgba(255,255,255,0.4)',glassBrd:'rgba(255,255,255,0.25)'},
    green:{accent:'#34C759',hover:'#248A3D',bg:'#34C759',
           glassBg:'rgba(255,255,255,0.4)',glassBrd:'rgba(255,255,255,0.25)'}
    // â€¦keep the rest of your themes
  };
  const name = localStorage.getItem('theme') || 'purple';
  const t = themes[name] || themes.purple;
  const r = document.documentElement.style;
  r.setProperty('--accent', t.accent);
  r.setProperty('--accent-hover', t.hover);
  r.setProperty('--accent-bg', t.bg);
  r.setProperty('--glass-bg', t.glassBg);
  r.setProperty('--glass-brd', t.glassBrd);
  r.setProperty('--btn-text', '#fff');
  document.documentElement.style.visibility = 'hidden';
  document.addEventListener('DOMContentLoaded', () => {
    document.documentElement.style.visibility = '';
  });
})();
</script>
<link rel="stylesheet" href="/style.css">
  <style>
    /*
      The template panel previously used fixed positioning, which
      caused it to overlap the Sequences section. Setting it to
      relative positioning keeps the panel within the normal flow and
      allows the rest of the page to render correctly.
    */
    #templatePanel {
      position: relative;
      margin: 0 auto;
      width: 90vw;
      max-width: 1100px;
    }

    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:50}
    .modal{width:min(1100px,96vw);max-height:min(90vh,900px);border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.25);background:white;display:flex;flex-direction:column;overflow:hidden}
    .modal header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 16px;border-bottom:1px solid rgba(0,0,0,.08);background:var(--glass-bg);backdrop-filter: blur(10px)}
    .modal .body{padding:16px;overflow-y:auto}
  </style>
</head>
<body>
<header id="host-nav" class="p-4">
  <div class="max-w-7xl mx-auto glass card flex items-center justify-between">
    <div class="text-xl font-semibold">Metro 2 CRM</div>
    <div class="flex items-center gap-2">
      <a href="/dashboard" class="btn">Dashboard</a>
      <a href="/clients" class="btn">Clients</a>
      <a href="/leads" class="btn">Leads</a>
      <a href="/schedule" class="btn">Schedule</a>
      <a href="/billing" class="btn">Billing</a>
      <div class="relative group">
        <a href="/settings" class="btn">Settings</a>
        <div class="absolute hidden group-hover:flex flex-col right-0 top-full mt-2 glass card p-2 gap-2 z-10">

          <a id="navCompany" href="/my-company" class="btn text-sm">My Company</a>
          <a href="/letters" class="btn text-sm">Letter</a>
          <a href="/library" class="btn text-sm">Library</a>
            <button id="btnInvite" class="btn text-sm" style="background: var(--green-bg);">Add Team Member</button>
        </div>
      </div>
      <a href="/tradelines" class="btn">Tradelines</a>
      <button id="btnHelp" class="btn" data-tip="Help (H)">Help</button>
    </div>
  </div>
</header>

<main class="max-w-5xl mx-auto p-4 space-y-4">
  <div id="templatePanel" class="glass card space-y-4">
    <div class="font-medium">Letter Templates</div>
    <div class="flex gap-4">
      <div class="w-1/3 space-y-4">
        <div>
          <div class="font-medium text-sm">Main Letters</div>
          <div id="mainList" class="space-y-1 text-sm"></div>
        </div>
      </div>
      <div id="tplEditor" class="flex-1 space-y-2 hidden">
        <input id="tplHeading" class="input w-full text-sm" placeholder="Heading" />
        <textarea id="tplIntro" class="input w-full text-sm" placeholder="Intro"></textarea>
        <textarea id="tplAsk" class="input w-full text-sm" placeholder="Ask"></textarea>
        <textarea id="tplAfter" class="input w-full text-sm" placeholder="After Issues"></textarea>
        <textarea id="tplEvidence" class="input w-full text-sm" placeholder="Evidence"></textarea>
        <div id="tplPreview" class="input w-full text-sm whitespace-pre-line h-48 overflow-y-auto" title="Drop a template here to load it"></div>
        <div class="flex justify-end gap-2">
          <button id="saveTemplate" class="btn text-sm">Save Template</button>
          <button id="saveTemplateCopy" class="btn text-sm">Save As New</button>
          <button id="cancelTemplate" class="btn text-sm">Cancel</button>
        </div>
      </div>
      <div class="w-1/3 space-y-4">
        <button id="newTemplate" class="btn w-full mb-2">New Template</button>
        <div class="font-medium text-sm">Letter Templates</div>
        <div id="templateList" class="space-y-1 text-sm max-h-96 overflow-y-auto"></div>
      </div>
    </div>
  </div>

  <div class="glass card space-y-4">
    <div class="font-medium">Sequences</div>
    <div class="flex gap-4">
      <div class="w-1/3">
        <button id="newSequence" class="btn w-full mb-2">New Sequence</button>
        <div id="sequenceList" class="space-y-1 text-sm max-h-60 overflow-y-auto"></div>
      </div>
      <div class="flex-1 space-y-2">
        <input id="seqName" class="input w-full text-sm" placeholder="Sequence Name" />
        <div id="seqTemplates" class="checkbox-list w-full text-sm space-y-1 max-h-60 overflow-y-auto"></div>
        <button id="saveSequence" class="btn text-sm">Save Sequence</button>
      </div>
    </div>
  </div>
</main>
<script type="module" src="/common.js"></script>
<script src="/library.js"></script>
</body>
</html>

