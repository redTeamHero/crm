<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Client Portal - {{name}}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
  <script src="/theme.js"></script>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <header id="team-nav" class="p-4 md:pt-8">
    <div class="max-w-7xl mx-auto nav-shell glass nav-elevated">
      <div class="nav-brand-row">
        <div class="flex items-center gap-4">
          <div id="mascot" class="brand-orb"></div>
          <div class="flex flex-col">
            <div id="companyName" class="text-2xl font-semibold tracking-tight">Client Portal</div>
            <div class="text-[11px] uppercase tracking-[0.3em] text-slate-500/80">Trust ‚Ä¢ Clarity ‚Ä¢ Empowerment</div>
          </div>
        </div>
        <div class="hidden md:flex nav-actions">
          <button id="languageToggle" class="btn-ghost text-xs uppercase tracking-widest">EN / ES</button>
          <a href="#payments" class="btn-outline">View Plan</a>
          <a id="bookCall" href="#payments" class="btn">Book Strategy Call</a>
        </div>
        <button id="navToggle" class="btn nav-toggle md:hidden" type="button" aria-expanded="false" aria-controls="primaryNav">
          <span class="sr-only">Toggle navigation</span>
          <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>
      <nav id="primaryNav" class="hidden flex-col gap-3 md:flex md:flex-row md:items-center md:justify-between" aria-label="Client navigation">
        <div id="primaryNavLinks" class="flex flex-col md:flex-row md:items-center gap-2 w-full md:w-auto">
          <a id="navDashboard" href="#" class="btn nav-btn w-full md:w-auto">Dashboard</a>
          <a href="#messages" class="btn nav-btn w-full md:w-auto">Messages</a>
          <a href="#educationSection" class="btn nav-btn w-full md:w-auto">Education</a>
          <a href="#documentSection" class="btn nav-btn w-full md:w-auto">Docs</a>
          <a href="#mailSection" class="btn nav-btn w-full md:w-auto">Mail</a>
          <a href="#payments" class="btn nav-btn w-full md:w-auto">Payments</a>
          <a href="#negative-items" class="btn nav-btn w-full md:w-auto">Negative Items</a>
          <a href="#uploads" class="btn nav-btn w-full md:w-auto">Uploads</a>
        </div>
        <div class="flex flex-col md:flex-row md:items-center gap-3 w-full md:w-auto">
          <div id="tierBadge" class="tier-pill hidden"></div>
          <div class="flex md:hidden gap-2">
            <button class="btn-ghost flex-1" id="mobileLanguageToggle">EN / ES</button>
            <a href="#payments" class="btn-outline flex-1">Plan</a>
          </div>
        </div>
      </nav>
    </div>
  </header>
  <div id="messageBanner" class="message-banner hidden max-w-7xl mx-auto"></div>
  <main id="portalMain" class="portal-grid max-w-7xl mx-auto px-4 pb-16">
    <section class="portal-primary space-y-4">
      <article class="glass card hero-card">
        <div class="hero-aura"></div>
        <div class="flex flex-col gap-6 xl:flex-row xl:items-start">
          <div class="flex-1 space-y-4">
            <div>
              <p class="text-xs font-semibold uppercase tracking-[0.35em] text-slate-500">Today‚Äôs Focus</p>
              <h2 class="text-3xl font-semibold text-slate-900">Welcome back, {{name}}</h2>
              <p class="text-sm text-slate-600 max-w-2xl">Review your dispute momentum, upload documents securely, and stay aligned with the compliance-first plan crafted for you.</p>
            </div>
            <div class="hero-checklist">
              <div class="hero-checklist-item">
                <span class="hero-checklist-icon">üìç</span>
                <div>
                  <div class="text-[13px] uppercase tracking-[0.2em] text-slate-400">Current Step</div>
                  <div id="currentStep" class="text-lg font-semibold text-slate-900">Loading...</div>
                </div>
              </div>
              <div class="hero-checklist-item">
                <span class="hero-checklist-icon">üìù</span>
                <div>
                  <div class="text-[13px] uppercase tracking-[0.2em] text-slate-400">Next Action</div>
                  <div class="text-sm text-slate-600">Upload proof, approve letters, or schedule a Metro-2 audit review.</div>
                </div>
              </div>
              <div class="hero-checklist-item">
                <span class="hero-checklist-icon">ü§ù</span>
                <div>
                  <div class="text-[13px] uppercase tracking-[0.2em] text-slate-400">Team Support</div>
                  <div class="text-sm text-slate-600">Your credit strategist will recap updates in the message center.</div>
                </div>
              </div>
            </div>
          </div>
          <div class="hero-cta space-y-3">
            <button id="btnGoal" class="btn w-full">Mark Today‚Äôs Goal Done</button>
            <a href="#messages" class="btn-outline w-full text-center">Message Your Strategist</a>
            <div class="confidence-note text-xs text-slate-500 text-center">Secure uploads ‚Ä¢ TLS protected ‚Ä¢ Never promise timelines</div>
          </div>
        </div>
        <div id="confetti" class="pointer-events-none absolute inset-0"></div>
        <div id="goalBurst" class="pointer-events-none absolute inset-0"></div>
      </article>
      <div class="grid gap-4 lg:grid-cols-2 xl:grid-cols-3">
        <section id="creditScoreWidget" class="glass card stat-card xl:col-span-1">
          <div class="flex items-center justify-between">
            <div>
              <div class="panel-kicker">Credit Health</div>
              <h3 class="panel-title">Score Overview</h3>
            </div>
            <span class="badge-pill">Private</span>
          </div>
          <div class="score-grid">
            <div class="score-dial">
              <div class="score-dial-inner">
                <span class="score-value tu">0</span>
                <span class="score-label">TransUnion</span>
              </div>
            </div>
            <div class="score-dial">
              <div class="score-dial-inner">
                <span class="score-value ex">0</span>
                <span class="score-label">Experian</span>
              </div>
            </div>
            <div class="score-dial">
              <div class="score-dial-inner">
                <span class="score-value eq">0</span>
                <span class="score-label">Equifax</span>
              </div>
            </div>
          </div>
          <div id="creditScoreUpdated" class="text-xs text-slate-500 mt-3 hidden">Updated ‚Ä¢ Actualizado</div>
          <div id="scoreConfetti" class="pointer-events-none absolute inset-0"></div>
        </section>
        <section class="glass card stat-card xl:col-span-1">
          <div class="panel-kicker">Dispute Tracker</div>
          <h3 class="panel-title">Items in Dispute</h3>
          <div id="itemsInDispute" class="items-pod">
            <div id="itemsInDisputeEmpty" class="w-32 h-32"></div>
            <div id="itemsInDisputeText" class="items-empty">No items in dispute.</div>
          </div>
          <div id="itemsSummary" class="text-xs text-slate-500 mt-3"></div>
        </section>
        <section class="glass card stat-card xl:col-span-1">
          <div class="panel-kicker">Snapshot</div>
          <h3 class="panel-title">Credit Report Signals</h3>
          <div id="reportSnapshot" class="snapshot-list">No data.</div>
        </section>
      </div>
      <div class="grid gap-4 lg:grid-cols-2">
        <section class="glass card">
          <div class="panel-kicker">Milestones</div>
          <h3 class="panel-title">Wins + Upcoming</h3>
          <div id="milestones" class="timeline-list">No milestones yet.</div>
        </section>
        <section class="glass card">
          <div class="panel-kicker">Uploads &amp; Approvals</div>
          <h3 class="panel-title">Document Center</h3>
          <p class="text-xs text-slate-500 mb-2">Share government ID, proof of address, and statements for compliance checks.</p>
          <div class="flex flex-wrap gap-2 mb-4">
            <a href="#uploads" class="chip">Upload Docs</a>
            <a href="#documentSection" class="chip">View Letters</a>
            <a href="#mailSection" class="chip">Certified Mail</a>
          </div>
          <div id="docListPreview" class="doc-grid text-sm">No documents uploaded.</div>
        </section>
      </div>
    </section>
    <aside class="portal-secondary space-y-4">
      <section class="glass card">
        <div class="panel-kicker">Your Crew</div>
        <h3 class="panel-title">Credit Team</h3>
        <div id="teamList" class="text-sm space-y-2">Loading...</div>
      </section>
      <section class="glass card">
        <div class="panel-kicker">Education</div>
        <h3 class="panel-title">Playbooks &amp; Wins</h3>
        <div id="newsFeed" class="text-sm space-y-2">Loading...</div>
        <a href="#educationSection" class="btn-outline mt-4 w-full text-center">View Learning Library</a>
      </section>
      <section class="glass card">
        <div class="panel-kicker">Payment Planner</div>
        <h3 class="panel-title">Debt Payoff Calculator</h3>
        <form id="debtForm" class="space-y-2">
          <input type="number" id="debtAmount" class="input w-full" placeholder="Debt Amount" required />
          <input type="number" id="debtRate" class="input w-full" placeholder="APR %" required />
          <input type="number" id="debtMonths" class="input w-full" placeholder="Months to Payoff" required />
          <button type="submit" class="btn w-full">Calculate</button>
        </form>
        <div id="debtResult" class="text-xs text-slate-500 mt-3"></div>
      </section>
    </aside>
  </main>
  <section id="uploadSection" class="detail-section hidden">
    <div class="section-shell">
      <h2 class="section-title">Upload Documents</h2>
      <p class="section-subtitle">TLS protected. Only share what‚Äôs required to validate identity and Metro-2 facts.</p>
      <form id="uploadForm" class="detail-card">
        <div class="grid gap-3 md:grid-cols-2">
          <label class="form-label" for="uploadType">Document Type</label>
          <select id="uploadType" class="input w-full">
            <option value="id">Government ID</option>
            <option value="residency">Proof of Residency</option>
            <option value="statement">Latest Statement</option>
          </select>
        </div>
        <div class="grid gap-3">
          <label class="form-label" for="uploadFile">Select File</label>
          <input type="file" id="uploadFile" class="input w-full" required />
        </div>
        <button type="submit" class="btn w-full md:w-auto">Upload Securely</button>
        <div id="uploadStatus" class="text-xs text-slate-500"></div>
      </form>
    </div>
  </section>
  <section id="messageSection" class="detail-section hidden">
    <div class="section-shell">
      <h2 class="section-title">Messages</h2>
      <p class="section-subtitle">Ask questions, approve drafts, and capture call recaps in one place.</p>
      <div class="detail-card space-y-3">
        <div id="messageList" class="space-y-2 text-sm flex flex-col"></div>
        <form id="messageForm" class="flex flex-col sm:flex-row gap-2">
          <input id="messageInput" class="input flex-1" placeholder="Type message..." />
          <button class="btn sm:w-auto" type="submit">Send</button>
        </form>
      </div>
    </div>
  </section>
  <section id="educationSection" class="detail-section hidden">
    <div class="section-shell">
      <div class="glass card">
        <div class="panel-kicker">Education</div>
        <h2 class="section-title">Knowledge Base</h2>
        <div id="education" class="text-sm space-y-2">No educational items.</div>
      </div>
    </div>
  </section>
  <section id="documentSection" class="detail-section hidden">
    <div class="section-shell">
      <div class="glass card">
        <div class="panel-kicker">Document Center</div>
        <h2 class="section-title">Letters &amp; Evidence</h2>
        <div id="docList" class="text-sm space-y-2">No documents uploaded.</div>
      </div>
    </div>
  </section>
  <section id="mailSection" class="detail-section hidden">
    <div class="section-shell">
      <h2 class="section-title">Mail</h2>
      <p class="section-subtitle">Track certified mailings and internal follow-ups. Entries include DOFD + bureau audit trails.</p>
      <div class="detail-card">
        <div class="flex gap-2 mb-4">
          <button id="mailTabWaiting" class="btn chip active">Waiting</button>
          <button id="mailTabMailed" class="btn chip">Mailed</button>
        </div>
        <div id="mailWaiting" class="space-y-2"></div>
        <div id="mailMailed" class="space-y-2 hidden"></div>
      </div>
    </div>
  </section>
  <section id="paymentSection" class="detail-section hidden">
    <div class="section-shell">
      <div class="glass card">
        <div class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between">
          <div>
            <div class="text-xs uppercase tracking-wide text-slate-500">Outstanding Balance</div>
            <div id="paymentTotal" class="text-4xl font-bold text-slate-900">$0.00</div>
          </div>
          <div class="text-xs text-slate-500 max-w-sm">
            Pay securely inside your portal. We focus on investigations and Metro-2 compliance ‚Äî never guaranteed outcomes or timelines.
          </div>
        </div>
      </div>
      <div id="paymentError" class="hidden mt-4 rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700"></div>
      <div id="paymentEmpty" class="mt-4 rounded-xl border border-dashed border-slate-300/70 bg-white/80 p-6 text-sm text-slate-600 text-center">
        No invoices yet. We‚Äôll notify you when a balance posts.
      </div>
      <div id="paymentList" class="mt-4 space-y-3"></div>
      <p class="mt-6 text-xs text-slate-500">
        Questions? Email <a href="mailto:support@example.com" class="underline">support@example.com</a>. Payments cover investigation &amp; dispute work only.
      </p>
    </div>
  </section>
  <section id="negativeItemsSection" class="detail-section hidden">
    <div class="section-shell">
      <h2 class="section-title">Negative Items</h2>
      <p class="section-subtitle">Metro-2 violations sorted by severity (S5 is highest). Tap an account to confirm statuses, past-due amounts, and DOFD alignment.</p>
      <div class="detail-card space-y-3">
        <input id="negativeItemSearch" type="text" class="input w-full" placeholder="Search creditor or bureau" />
        <select id="negativeItemSort" class="input w-full">
          <option value="severity-desc">Severity ‚Üì</option>
          <option value="severity-asc">Severity ‚Üë</option>
          <option value="creditor-asc">Creditor A‚ÄìZ</option>
          <option value="creditor-desc">Creditor Z‚ÄìA</option>
        </select>
        <div id="negativeItemList" class="space-y-3 max-h-96 overflow-y-auto"></div>
      </div>
    </div>
  </section>
  <script src="/client-portal.js"></script>
</body>
</html>
