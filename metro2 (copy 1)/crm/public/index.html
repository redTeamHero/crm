<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Metro 2 CRM</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#AF52DE" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/shepherd.js@9.1.1/dist/css/shepherd.css">
  <script src="https://cdn.jsdelivr.net/npm/shepherd.js@9.1.1/dist/js/shepherd.min.js" defer></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script defer data-domain="example.com" src="https://plausible.io/js/script.js"></script>
<script src="/theme.js"></script>
<link rel="stylesheet" href="/style.css">
<link rel="stylesheet" href="/evolv-dark.css">
<script src="/sidebar.js" defer></script>
<script src="/command-palette.js" defer></script>
</head>
<body>
<header id="host-nav" class="p-4">
  <div class="max-w-7xl mx-auto glass card nav-shell nav-elevated">
    <div class="nav-brand-row">
      <div class="nav-brand">
        <div class="brand-mark">M2</div>
        <div>
          <div class="text-xl font-semibold">Metro 2 CRM</div>
          <p class="nav-subtitle">Trust â€¢ Clarity â€¢ Empowerment</p>
        </div>
      </div>
      <div class="nav-actions">
        <button id="navToggle" class="btn md:hidden" type="button" aria-expanded="false" aria-controls="primaryNav">
          <span class="mr-2">Menu</span>
          <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>
    </div>
    <nav id="primaryNav" class="hidden nav-inline md:flex" aria-label="Primary">
      <div id="primaryNavLinks" class="nav-links w-full md:w-auto">
        <a href="/dashboard" class="btn nav-btn">Dashboard</a>
        <a href="/clients" class="btn nav-btn">Clients</a>
        <a href="/leads" class="btn nav-btn">Leads</a>
        <div class="nav-dropdown" id="navMarketing">
          <button type="button" id="navMarketingToggle" class="btn nav-btn flex items-center justify-between md:justify-center gap-2" aria-expanded="false" aria-haspopup="true">
            <span data-i18n="nav.marketing">Marketing</span>
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div id="navMarketingMenu" class="nav-dropdown-menu glass card p-2">
            <a href="/marketing/sms" class="btn text-sm" data-i18n="nav.marketingSms">Marketing â€¢ SMS</a>
            <a href="/marketing/email" class="btn text-sm" data-i18n="nav.marketingEmail">Marketing â€¢ Email</a>
          </div>
        </div>
        <a href="/schedule" class="btn nav-btn">Schedule</a>
        <a href="/billing" class="btn nav-btn">Billing</a>
        <div class="nav-dropdown" id="navSettings">
          <button type="button" id="navSettingsToggle" class="btn nav-btn flex items-center justify-between md:justify-center gap-2" aria-expanded="false" aria-haspopup="true">
            <span>Settings</span>
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div id="navSettingsMenu" class="nav-dropdown-menu glass card p-2">
            <a id="navCompany" href="/my-company" class="btn text-sm">My Company</a>
            <a href="/settings/client-portal" class="btn text-sm" data-i18n="nav.clientPortal">Client Portal</a>
            <a href="/letters" class="btn text-sm">Letter</a>
            <a href="/library" class="btn text-sm">Library</a>
            <a href="/settings#api-integrations" class="btn text-sm">APIs</a>
            <a href="/workflows" class="btn text-sm">Workflows</a>
            <button id="btnInvite" class="btn text-sm" style="background: var(--green-bg);">Add Team Member</button>
          </div>
        </div>
        <a href="/tradelines" class="btn nav-btn">Tradelines</a>
        <button id="btnHelp" class="btn nav-btn" data-tip="Help (H)">Help</button>
        <div id="tierBadge" class="hidden sm:flex items-center gap-2 rounded-full shadow-sm" title="You've started your journey.">
          <span class="text-xl">ðŸ“„</span>
          <span class="font-semibold text-sm">Rookie</span>
        </div>
      </div>
    </nav>
  </div>
</header>

<main class="workspace px-4 pb-12">
  <div class="workspace-inner max-w-7xl mx-auto space-y-6">
    <section class="workspace-hero glass card">
      <div class="hero-top">
        <div class="hero-copy">
          <p class="eyebrow">Client Command Center</p>
          <h1 class="hero-title">Guide every credit dispute with premium clarity.</h1>
          <p class="hero-description">Keep advisors, clients, and Metro-2 workflows aligned at every touchpoint.</p>
        </div>
        <div class="hero-actions">
          <a href="/marketing/sms" class="btn hero-btn">Launch Lead Magnet</a>
          <div class="hero-support">
            <span>Need a Metro-2 second opinion?</span>
            <a href="/schedule" class="btn btn-outline hero-support-link">Book a Clarity Call</a>
          </div>
        </div>
      </div>
      <div id="clientsMetrics" class="hero-metrics-grid">
        <div class="metric-card">
          <span class="metric-title">Active Clients</span>
          <span class="metric-value" id="metricActiveConsumers">0</span>
          <span class="metric-subtitle">of <span id="metricTotalConsumers">0</span> total</span>
        </div>
        <div class="metric-card">
          <span class="metric-title">Paid to Date</span>
          <span class="metric-value" id="metricRevenue">$0.00</span>
          <span class="metric-subtitle">Collected across all engagements</span>
        </div>
        <div class="metric-card">
          <span class="metric-title">Pipeline Remaining</span>
          <span class="metric-value" id="metricPipeline">$0.00</span>
          <span class="metric-subtitle">Open balances + upsells</span>
        </div>
        <div class="metric-card metric-progress">
          <span class="metric-title">Fulfillment Progress</span>
          <span class="metric-value" id="metricProgress">0%</span>
          <div class="progress-track">
            <div class="progress-fill" id="metricProgressBar"></div>
          </div>
          <span class="metric-subtitle">Keep letters & calls in sync</span>
        </div>
        <div class="metric-card">
          <span class="metric-title">Reports Uploaded</span>
          <span class="metric-value" id="metricReportsUploaded">0</span>
          <span class="metric-subtitle">Auto-tracked last 30 days</span>
        </div>
      </div>
      <div id="clientsJourneyTracker" class="hero-tracker">
        <div class="hero-tracker-header">
          <div class="hero-tracker-copy">
            <div class="hero-tracker-title">Client Journey Tracker</div>
            <p class="hero-tracker-description">Map the next best action from onboarding to dispute delivery.</p>
          </div>
          <div id="stepControls" class="step-controls">
            <button id="addStep" class="btn btn-ghost" title="Add step">+</button>
          </div>
        </div>
        <div id="trackerSteps" class="tracker-steps"></div>
      </div>
    </section>

    <div id="workflowNotice" class="alert alert-warn hidden"></div>
    <div id="err" class="alert alert-error hidden"></div>

    <section class="workspace-grid">
      <aside id="clientsSidebar" class="glass panel panel-sidebar space-y-4">
        <div class="panel-header">
          <div>
            <div class="panel-title">Consumers</div>
            <p class="panel-subtitle">Organize disputes by status</p>
          </div>
          <div class="panel-actions">
            <button id="btnCreateClient" class="btn text-sm" data-tip="Create Client (N)">Create Client</button>
            <button id="btnEditClient" class="btn text-sm" data-tip="Edit Client (E)">Edit Client</button>
          </div>
        </div>
        <input id="consumerSearch" placeholder="Search consumers..." class="input w-full text-sm" />
        <div id="consumerList" class="consumer-list max-h-96 overflow-y-auto"></div>
        <div class="panel-footer">
          <button id="consPrev" class="btn btn-outline text-sm">Prev</button>
          <div class="panel-pagination text-sm muted">Page <span id="consPage">1</span> / <span id="consPages">1</span></div>
          <button id="consNext" class="btn btn-outline text-sm">Next</button>
        </div>
      </aside>

      <section class="workspace-panels space-y-4">
        <div class="panel-grid panel-grid-balanced">
          <article class="glass panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">Messages</div>
                <p class="panel-subtitle">Keep clients updated.</p>
              </div>
              <button id="btnSendMsg" class="btn text-sm">Send</button>
            </div>
            <div id="msgList" class="messages-list text-sm"></div>
            <textarea id="msgInput" class="input input-textarea text-sm" rows="2" placeholder="Type message..."></textarea>
          </article>

          <article class="glass panel">
            <div class="panel-header">
              <div>
                <div class="panel-title">Selected Consumer: <span id="selConsumer">â€”</span></div>
                <p class="panel-subtitle">Report: <select id="reportPicker" class="input input-select text-sm"></select></p>
                <div class="mt-2">
                  <button id="breachStatus" class="btn btn-outline text-xs" type="button">Breaches: â€”</button>
                </div>
              </div>
              <div class="panel-actions chip-row">
                <button id="btnToggleParseMode" class="chip" type="button" data-tip="Toggle LLM parsing">Parse: LLM</button>
                <button id="btnUpload" class="chip" data-tip="Upload HTML (U)">Upload HTML</button>
                <button id="btnUploadPdf" class="chip" data-tip="Upload PDF report">Upload PDF</button>
                <button id="btnDataBreach" class="chip" data-tip="Databreach options">Databreach</button>
                <button id="btnAuditReport" class="chip" data-tip="Run audit on current report">Audit</button>
                <button id="btnDeleteReport" class="chip" data-tip="Remove current report (click)">Remove Report</button>
                <input id="fileInput" type="file" accept=".html,.htm,.pdf,application/pdf,text/html" class="hidden" />
              </div>
            </div>
          </article>
        </div>

        <article id="clientsNegativePanel" class="glass panel">
          <div class="panel-header">
            <div>
              <div class="panel-title">Files & Activity</div>
              <p class="panel-subtitle">Track deliverables & portal drops.</p>
            </div>
            <div class="panel-actions">
              <input id="activityFile" type="file" class="hidden" />
              <button id="btnAddFile" class="btn text-sm" data-tip="Upload file to this consumer">+ Add File</button>
              <a id="activityPortalLink" class="btn btn-outline text-sm hidden" href="#" target="_blank">Client Portal</a>
            </div>
          </div>
          <div id="activityList" class="activity-list text-sm"></div>
        </article>

        <article class="glass panel">
          <div class="panel-header panel-header--centered">
            <div class="panel-header-text">
              <div class="panel-title">Quick Actions</div>
              <p class="panel-subtitle">Click a mode to tag tradelines.</p>
            </div>
          </div>
          <div id="modeBar" class="mode-bar"></div>
          <div class="filters">
            <div class="filters-header">Filters</div>
            <div id="filterBar" class="filter-bar"></div>
            <button id="btnClearFilters" class="btn btn-outline mt-2" data-tip="Clear Filters (C)">Clear Filters</button>
          </div>
        </article>

        <article class="glass panel">
          <div class="panel-header panel-header--centered">
            <div class="panel-header-text">
              <div class="panel-title">Negative Items</div>
              <p class="panel-subtitle">Select tradelines to dispute.</p>
            </div>
            <div class="panel-actions negative-options">
              <label class="text-sm flex items-center gap-2" title="Generate debt collector letters">
                <input type="checkbox" id="cbCollectors" /> Collectors
              </label>
              <label class="text-sm flex items-center gap-2" title="Generate personal information letters">
                <input type="checkbox" id="cbPersonalInfo" /> Personal Info
              </label>
              <label class="text-sm flex items-center gap-2" title="Use AI to reword letters">
                <input type="checkbox" id="cbUseGpt" /> AI
              </label>
              <label class="text-sm flex items-center gap-2" title="Render OCR-resistant PDFs">
                <input type="checkbox" id="cbUseOcr" /> OCR
              </label>
              <button id="btnSelectAll" class="btn btn-outline text-sm" data-tip="Select or deselect all negative items">Select All</button>
              <button id="btnSelectNegative" class="btn btn-outline text-sm" data-tip="Select or deselect high-priority negative items">Select Negative Items</button>
              <button id="btnGenerate" class="btn" data-tip="Generate Letters (G)">Generate Letters</button>
              <div class="view-toggle">
                <button id="btnCardView" class="view-toggle-btn active" title="Card View">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><rect x="1" y="1" width="6" height="6" rx="1"/><rect x="9" y="1" width="6" height="6" rx="1"/><rect x="1" y="9" width="6" height="6" rx="1"/><rect x="9" y="9" width="6" height="6" rx="1"/></svg>
                </button>
                <button id="btnListView" class="view-toggle-btn" title="List View">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><rect x="1" y="1" width="14" height="3" rx="1"/><rect x="1" y="6.5" width="14" height="3" rx="1"/><rect x="1" y="12" width="14" height="3" rx="1"/></svg>
                </button>
              </div>
            </div>
          </div>
          <div class="text-xs muted mt-1 text-center">Tip: Click any card to zoom for full detail.</div>
          <div id="tlList" class="tradeline-grid mt-3"></div>
          <div id="tlPager" class="panel-footer mt-3">
            <button id="tlPrev" class="btn btn-outline text-sm">Prev</button>
            <div class="panel-pagination text-sm muted">Page <span id="tlPage">1</span> / <span id="tlPages">1</span></div>
            <select id="tlPageSize" class="input input-select text-sm w-24">
              <option value="3">3</option>
              <option value="6" selected>6</option>
              <option value="9">9</option>
              <option value="12">12</option>
              <option value="15">15</option>
              <option value="all">All</option>
            </select>
            <button id="tlNext" class="btn btn-outline text-sm">Next</button>
          </div>
        </article>

        <article class="glass panel">
          <div class="panel-header">
            <div>
              <div class="panel-title">Debt Collectors</div>
              <p class="panel-subtitle">Generate letters or escalation scripts.</p>
            </div>
          </div>
          <div id="collectorList" class="collector-list"></div>
        </article>
      </section>
    </section>
  </div>
</main>

<!-- Consumer list item template -->
<template id="consumerItem">
  <div class="glass card consumer-card cursor-pointer">
    <div class="flex items-start justify-between">
      <div>
        <div class="name font-medium"></div>
        <div class="email text-sm muted"></div>
      </div>
      <button class="delete btn" data-tip="Delete Consumer (click)">Ã—</button>
    </div>
  </div>
</template>

<!-- Negative item card template -->
<template id="tlTemplate">
  <div class="glass card tl-card" data-index="">
    <div class="tl-card-content">
      <div class="tl-head">
        <div class="tl-title-block wrap-anywhere">
          <div class="tl-creditor"></div>
          <div class="tl-card-meta">
            <span class="tl-card-meta-item">Index <span class="tl-idx"></span></span>
            <span class="tl-card-meta-item">TransUnion <span class="tl-tu-acct"></span></span>
            <span class="tl-card-meta-item">Experian <span class="tl-exp-acct"></span></span>
            <span class="tl-card-meta-item">Equifax <span class="tl-eqf-acct"></span></span>
          </div>
          <div class="tl-manual-reason"></div>
        </div>
        <div class="tl-card-actions">
          <div class="special-badges"></div>
          <select class="tl-playbook-select hidden"></select>
          <button class="tl-playbook btn" title="Select playbook">Playbook</button>
          <button class="tl-edit tl-card-icon" title="Edit this card">âœŽ</button>
          <button class="tl-remove tl-card-icon" title="Hide this card" data-tip="Remove Card (R when focused)">Ã—</button>
        </div>
      </div>

      <div class="tl-card-body">
        <div class="tl-bureaus">
          <label class="tl-bureau-option">
            <input type="checkbox" class="bureau" value="TransUnion" />
            <span>TransUnion</span>
          </label>
          <label class="tl-bureau-option">
            <input type="checkbox" class="bureau" value="Experian" />
            <span>Experian</span>
          </label>
          <label class="tl-bureau-option">
            <input type="checkbox" class="bureau" value="Equifax" />
            <span>Equifax</span>
          </label>
        </div>

        <div class="tl-letter-row">
          <label class="sr-only">
            Letter Template
            <select class="tl-letter-select"></select>
          </label>
        </div>

        <div class="tl-tags"></div>

        <div class="tl-violations-panel">
          <div class="tl-violations"></div>
          <div class="tl-violations-footer">
            <button class="tl-reason-prev btn-soft hidden">Prev</button>
            <button class="tl-reason-next btn-soft hidden">Next</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<!-- Inquiry item template -->
<template id="inqTemplate">
  <div class="flex items-center gap-2">
    <input type="checkbox" class="inq-dispute" />
    <div class="flex-1">
      <div class="font-medium inq-creditor"></div>
      <div class="text-xs muted"><span class="inq-bureau"></span> â€¢ <span class="inq-date"></span></div>
    </div>
  </div>
</template>

<!-- Inquiry item template -->
<!-- Debt collector item template -->
  <template id="collectorTemplate">
    <div class="flex items-center gap-2">
      <input type="checkbox" class="collector-pick" />
      <div class="flex-1">
        <div class="font-medium collector-name"></div>
        <div class="text-xs muted collector-address"></div>
        <div class="text-xs muted collector-phone"></div>
      </div>
    </div>
  </template>

<!-- New Consumer Modal -->
<div id="newModal" class="fixed inset-0 hidden items-center justify-center bg-[rgba(0,0,0,.45)] z-[999]">
  <form id="newForm" class="glass card w-[min(560px,92vw)] space-y-3">
    <div class="flex items-center justify-between">
      <div class="font-semibold">New Consumer</div>
      <div class="flex gap-2">
        <button type="button" id="newCancel" class="btn" data-tip="Cancel / Clear (C)">Cancel</button>
        <button type="button" id="newClose" class="btn" data-tip="Close">Ã—</button>
        <button class="btn" type="submit" data-tip="Create (S)">Create</button>
      </div>
    </div>
    <div class="grid grid-cols-2 gap-2 text-sm">
      <label class="flex flex-col">Name<input name="name" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">Email<input name="email" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">Phone<input name="phone" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">SSN last 4<input name="ssn_last4" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">DOB<input name="dob" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col col-span-2">Address 1<input name="addr1" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col col-span-2">Address 2<input name="addr2" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">City<input name="city" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">State<input name="state" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">Zip<input name="zip" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">Sale<input name="sale" type="number" step="0.01" class="border rounded px-2 py-1" /></label>
      <label class="flex flex-col">Paid<input name="paid" type="number" step="0.01" class="border rounded px-2 py-1" /></label>
      <label class="flex flex-col">Status<select name="status" class="border rounded px-2 py-1"><option value="active" selected>Active</option><option value="completed">Completed</option><option value="dropped">Dropped</option></select></label>
      <p class="col-span-2 text-[11px] text-gray-500">Want territory insights? Open <b>Dashboard â†’ Client Locations</b> for the live coverage map.</p>
    </div>
    <div class="text-xs muted">Tip: Press <b>S</b> to create, <b>C</b> to clear/cancel.</div>
  </form>
</div>

<!-- Edit Consumer Modal -->
<div id="editModal" class="fixed inset-0 hidden items-center justify-center bg-[rgba(0,0,0,.45)] z-[999]">
  <form id="editForm" class="glass card w-[min(560px,92vw)] space-y-3">
    <div class="flex items-center justify-between">
      <div class="font-semibold">Edit Consumer</div>
      <div class="flex gap-2">
        <button type="button" id="editCancel" class="btn" data-tip="Cancel / Clear (C)">Cancel</button>
        <button type="button" id="editClose" class="btn" data-tip="Close">Ã—</button>
        <button class="btn" type="submit" data-tip="Save (S)">Save</button>
      </div>
    </div>
    <div class="grid grid-cols-2 gap-2 text-sm">
      <label class="flex flex-col">Name<input name="name" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">Email<input name="email" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">Phone<input name="phone" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">SSN last 4<input name="ssn_last4" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">DOB<input name="dob" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col col-span-2">Address 1<input name="addr1" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col col-span-2">Address 2<input name="addr2" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">City<input name="city" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">State<input name="state" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">Zip<input name="zip" class="border rounded px-2 py-1"></label>
      <label class="flex flex-col">Sale<input name="sale" type="number" step="0.01" class="border rounded px-2 py-1" /></label>
      <label class="flex flex-col">Paid<input name="paid" type="number" step="0.01" class="border rounded px-2 py-1" /></label>
      <label class="flex flex-col">Status<select name="status" class="border rounded px-2 py-1"><option value="active">Active</option><option value="completed">Completed</option><option value="dropped">Dropped</option></select></label>
      <p class="col-span-2 text-[11px] text-gray-500">Need client coverage context? Check <b>Dashboard â†’ Client Locations</b> any time.</p>
    </div>
    <div class="text-xs muted">Tip: Press <b>S</b> to save, <b>C</b> to clear/cancel.</div>
  </form>
</div>

<!-- Zoom Modal (negative item details) -->
<div id="zoomModal" class="fixed inset-0 hidden items-center justify-center bg-[rgba(0,0,0,.55)]">
  <div id="zoomCard" class="glass card w-[min(900px,95vw)]">
    <div class="flex items-center justify-between mb-2">
      <div class="font-semibold">Negative Item Details</div>
      <button id="zoomClose" class="btn">Ã—</button>
    </div>
    <div id="zoomBody" class="text-sm"></div>
  </div>
</div>

<!-- Edit Negative Item Modal -->
<div id="tlEditModal" class="fixed inset-0 hidden items-center justify-center bg-[rgba(0,0,0,.45)] z-[999]">
  <form id="tlEditForm" class="glass card w-[min(900px,95vw)] space-y-3">
    <div class="flex items-center justify-between">
      <div class="font-semibold">Edit Negative Item</div>
      <div class="flex gap-2">
        <button type="button" id="tlEditCancel" class="btn">Cancel</button>
        <button type="submit" class="btn">Save</button>
      </div>
    </div>
    <div class="flex gap-4 text-sm">
      <div class="flex-1 space-y-2">
        <div id="tlHtmlContainer" class="hidden border rounded h-[400px]">
          <iframe id="tlHtmlPreview" class="w-full h-full"></iframe>
        </div>

      </div>
      <div class="flex-1 grid gap-2">
        <label class="flex flex-col">Creditor<input name="creditor" class="border rounded px-2 py-1" /></label>
        <label class="flex flex-col">TransUnion Account #<input name="tu_account_number" class="border rounded px-2 py-1" /></label>
        <label class="flex flex-col">Experian Account #<input name="exp_account_number" class="border rounded px-2 py-1" /></label>
        <label class="flex flex-col">Equifax Account #<input name="eqf_account_number" class="border rounded px-2 py-1" /></label>
        <label class="flex flex-col">Dispute Reason
          <input id="tlReasonSearch" placeholder="Search reasons..." class="border rounded px-2 py-1 mb-1" />
          <select id="tlReasonSelect" class="border rounded px-2 py-1"></select>
          <textarea id="tlReasonText" name="manual_reason" class="border rounded px-2 py-1 mt-1" rows="3"></textarea>
        </label>

      </div>
    </div>
  </form>
</div>

<!-- Data Breach Results Modal -->
<div id="breachModal" class="fixed inset-0 hidden items-center justify-center bg-[rgba(0,0,0,.55)] z-50">
  <div class="glass card w-[min(680px,95vw)]">
    <div class="flex items-center justify-between mb-2">
      <div class="font-semibold">Data Breach Results</div>
      <button id="breachClose" class="btn">Ã—</button>
    </div>
    <div id="breachBody" class="text-sm max-h-80 overflow-y-auto space-y-4">
      <div id="breachSummary" class="text-sm"></div>
      <div>
        <div class="font-medium">Select breaches to include</div>
        <div id="breachSelectionList" class="mt-2 space-y-2"></div>
      </div>
      <div>
        <div class="font-medium">Breach evidence</div>
        <textarea id="breachEvidenceNotes" class="input input-textarea text-sm mt-2" rows="3" placeholder="Add notes about breach notifications, FTC reports, or other evidence."></textarea>
        <div class="flex items-center gap-2 mt-2">
          <button id="breachEvidenceUpload" class="btn btn-outline text-sm" type="button">Upload evidence</button>
          <input id="breachEvidenceFile" type="file" class="hidden" />
        </div>
        <div id="breachEvidenceFiles" class="mt-2 space-y-1"></div>
      </div>
    </div>
    <div class="flex items-center justify-between mt-3">
      <button id="breachUseInDispute" class="btn btn-outline text-sm" type="button">Use in dispute</button>
      <button id="breachSend" class="btn">Send Audit PDF</button>
    </div>
  </div>
</div>

<!-- Help Modal (unchanged logic, bound in index.js hotkeys too) -->
<div id="helpModal" class="fixed inset-0 hidden items-center justify-center bg-[rgba(0,0,0,.45)] z-50">
  <div class="glass card w-[min(720px,92vw)]">
    <div class="flex items-center justify-between mb-2">
      <div class="font-semibold">Hotkeys & Tips</div>
      <button id="helpClose" class="btn">Ã—</button>
    </div>
    <div class="text-sm space-y-2">
      <div class="grid grid-cols-2 gap-3">
        <div class="glass card p-2">
          <div class="font-medium mb-1">Global</div>
          <ul class="list-disc list-inside">
            <li><b>N</b> â€“ New client</li>
            <li><b>L</b> â€“ New lead intake</li>
            <li><b>U</b> â€“ Upload HTML</li>
            <li><b>E</b> â€“ Edit consumer</li>
            <li><b>G</b> â€“ Generate letters</li>
            <li><b>C</b> â€“ Clear (context-aware)</li>
            <li><b>H</b> â€“ Help overlay</li>
            <li><b>R</b> â€“ Remove focused negative item card</li>
          </ul>
        </div>
        <div class="glass card p-2">
          <div class="font-medium mb-1">Modes / Cards</div>
          <ul class="list-disc list-inside">
            <li>Modes: <b>I</b>=Identity Theft, <b>D</b>=Data Breach, <b>S</b>=Sexual Assault</li>
            <li>Click a card to zoom; press <b>A</b> to toggle all bureaus on that card.</li>
            <li>Press <b>Esc</b> to exit a mode.</li>
          </ul>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <a class="btn" href="/quiz.html" target="_blank">Try Hotkeys Quiz</a>
        <div class="text-xs muted">Opens new tab</div>
      </div>
    </div>
  </div>
</div>

<script type="module" src="common.js"></script>
<script src="hotkeys.js"></script>
<script type="module" src="index.js"></script>
</body>
</html>
